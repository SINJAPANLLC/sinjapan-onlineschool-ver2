<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿ä½œæˆ - SIN JAPAN ONLINE SCHOOL</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
      background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
      min-height: 100vh;
      padding: 20px;
    }
    .container {
      max-width: 800px;
      margin: 0 auto;
      background: white;
      padding: 40px;
      border-radius: 16px;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
    }
    h1 {
      color: #1d4ed8;
      margin-bottom: 10px;
      font-size: 28px;
    }
    .subtitle {
      color: #64748b;
      margin-bottom: 30px;
      font-size: 14px;
    }
    .status {
      padding: 12px 16px;
      border-radius: 8px;
      margin-bottom: 20px;
      font-size: 14px;
      display: none;
    }
    .status.success {
      background: #dcfce7;
      color: #166534;
      border: 1px solid #86efac;
    }
    .status.error {
      background: #fee2e2;
      color: #991b1b;
      border: 1px solid #fca5a5;
    }
    .status.info {
      background: #dbeafe;
      color: #1e40af;
      border: 1px solid #93c5fd;
    }
    .progress {
      background: #f1f5f9;
      padding: 20px;
      border-radius: 8px;
      margin-bottom: 20px;
      display: none;
    }
    .progress-item {
      display: flex;
      align-items: center;
      margin-bottom: 10px;
      font-size: 14px;
    }
    .progress-item .icon {
      margin-right: 10px;
      font-size: 18px;
    }
    button {
      width: 100%;
      padding: 14px;
      background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
      color: white;
      border: none;
      border-radius: 8px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s;
      margin-bottom: 10px;
    }
    button:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 20px rgba(59, 130, 246, 0.4);
    }
    button:disabled {
      opacity: 0.6;
      cursor: not-allowed;
      transform: none;
    }
    .info-box {
      background: #f8fafc;
      padding: 16px;
      border-radius: 8px;
      margin-top: 20px;
      font-size: 13px;
      color: #475569;
      border-left: 4px solid #3b82f6;
    }
    .data-summary {
      background: #f1f5f9;
      padding: 20px;
      border-radius: 8px;
      margin-bottom: 20px;
    }
    .data-summary h3 {
      color: #1e293b;
      margin-bottom: 15px;
      font-size: 16px;
    }
    .data-summary ul {
      list-style: none;
      margin-left: 0;
    }
    .data-summary li {
      padding: 8px 0;
      color: #475569;
      font-size: 14px;
    }
    .data-summary li::before {
      content: "âœ“ ";
      color: #10b981;
      font-weight: bold;
      margin-right: 8px;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>ğŸ“Š ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿ä½œæˆ</h1>
    <p class="subtitle">SIN JAPAN ONLINE SCHOOL - ãƒ‡ãƒ¢ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—</p>
    
    <div class="data-summary">
      <h3>ä½œæˆã•ã‚Œã‚‹ãƒ‡ãƒ¼ã‚¿</h3>
      <ul>
        <li>5ä»¶ã®ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ã‚¹ï¼ˆãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã€ãƒ“ã‚¸ãƒã‚¹ã€ãƒ‡ã‚¶ã‚¤ãƒ³ç­‰ï¼‰</li>
        <li>3åã®å­¦ç”Ÿã‚¢ã‚«ã‚¦ãƒ³ãƒˆ</li>
        <li>å„ã‚³ãƒ¼ã‚¹ã«3-5ãƒ¬ãƒƒã‚¹ãƒ³</li>
        <li>å—è¬›å±¥æ­´ãƒ‡ãƒ¼ã‚¿</li>
        <li>ãƒ¬ãƒ“ãƒ¥ãƒ¼ãƒ»è©•ä¾¡ãƒ‡ãƒ¼ã‚¿</li>
        <li>å­¦ç¿’é€²æ—ãƒ‡ãƒ¼ã‚¿</li>
      </ul>
    </div>
    
    <div id="status" class="status"></div>
    <div id="progress" class="progress"></div>
    
    <button id="createBtn" data-testid="button-create-data">
      ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿ã‚’ä½œæˆ
    </button>
    
    <button id="cleanBtn" data-testid="button-clean-data" style="background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);">
      å…¨ã¦ã®ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿ã‚’å‰Šé™¤
    </button>
    
    <div class="info-box">
      <strong>ğŸ“Œ æ³¨æ„äº‹é …ï¼š</strong><br>
      ãƒ»ã“ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆã¯é–‹ç™ºãƒ»ãƒ†ã‚¹ãƒˆç”¨ã§ã™<br>
      ãƒ»æ—¢å­˜ã®ãƒ‡ãƒ¼ã‚¿ã«ã¯å½±éŸ¿ã—ã¾ã›ã‚“<br>
      ãƒ»ç®¡ç†è€…ã¨ã—ã¦ãƒ­ã‚°ã‚¤ãƒ³ã—ã¦ã„ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™
    </div>
  </div>

  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
    import { getAuth } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";
    import { getFirestore, collection, doc, setDoc, writeBatch, serverTimestamp, deleteDoc, getDocs, query, where } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

    const firebaseConfig = {
      apiKey: "AIzaSyACWkCVGsqeilFQgzazXzGIf1Cw_3Uu3NE",
      authDomain: "school-ec82e.firebaseapp.com",
      projectId: "school-ec82e",
      storageBucket: "school-ec82e.firebasestorage.app",
      messagingSenderId: "415312790339",
      appId: "1:415312790339:web:3938fb482f78b4768525f6"
    };

    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);
    const db = getFirestore(app);

    const statusDiv = document.getElementById('status');
    const progressDiv = document.getElementById('progress');
    const createBtn = document.getElementById('createBtn');
    const cleanBtn = document.getElementById('cleanBtn');

    function showStatus(message, type) {
      statusDiv.textContent = message;
      statusDiv.className = `status ${type}`;
      statusDiv.style.display = 'block';
    }

    function addProgress(message, done = false) {
      const icon = done ? 'âœ…' : 'â³';
      const item = document.createElement('div');
      item.className = 'progress-item';
      item.innerHTML = `<span class="icon">${icon}</span> ${message}`;
      progressDiv.appendChild(item);
      progressDiv.style.display = 'block';
    }

    function clearProgress() {
      progressDiv.innerHTML = '';
      progressDiv.style.display = 'none';
    }

    // ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ã‚¹ãƒ‡ãƒ¼ã‚¿
    const sampleCourses = [
      {
        id: 'course_web_dev_101',
        title: 'Webé–‹ç™ºå…¥é–€ - HTML/CSS/JavaScriptåŸºç¤',
        description: 'Webã‚µã‚¤ãƒˆåˆ¶ä½œã®åŸºç¤ã‚’å­¦ã³ã¾ã™ã€‚HTMLã€CSSã€JavaScriptã‚’ä½¿ã£ã¦å®Ÿè·µçš„ãªWebãƒšãƒ¼ã‚¸ã‚’ä½œæˆã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚',
        category: 'ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°',
        price: 29800,
        duration: 480,
        level: 'åˆç´š',
        thumbnail: '/logo-school.jpg',
        isPublished: true,
        totalStudents: 45,
        averageRating: 4.8,
        totalReviews: 12
      },
      {
        id: 'course_python_data',
        title: 'Pythonãƒ‡ãƒ¼ã‚¿åˆ†æãƒã‚¹ã‚¿ãƒ¼ã‚³ãƒ¼ã‚¹',
        description: 'Pythonã¨Pandasã€NumPyã‚’ä½¿ã£ãŸãƒ‡ãƒ¼ã‚¿åˆ†æã®å®Ÿè·µçš„ãªã‚¹ã‚­ãƒ«ã‚’ç¿’å¾—ã—ã¾ã™ã€‚ãƒ“ã‚¸ãƒã‚¹ã§ä½¿ãˆã‚‹ãƒ‡ãƒ¼ã‚¿åˆ†ææ‰‹æ³•ã‚’å­¦ã³ã¾ã™ã€‚',
        category: 'ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°',
        price: 39800,
        duration: 720,
        level: 'ä¸­ç´š',
        thumbnail: '/logo-school.jpg',
        isPublished: true,
        totalStudents: 32,
        averageRating: 4.9,
        totalReviews: 8
      },
      {
        id: 'course_business_english',
        title: 'ãƒ“ã‚¸ãƒã‚¹è‹±èªã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³',
        description: 'ã‚°ãƒ­ãƒ¼ãƒãƒ«ãƒ“ã‚¸ãƒã‚¹ã§é€šç”¨ã™ã‚‹è‹±èªåŠ›ã‚’èº«ã«ã¤ã‘ã¾ã™ã€‚ãƒ—ãƒ¬ã‚¼ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã€ãƒ¡ãƒ¼ãƒ«ã€ä¼šè­°ã§ã®å®Ÿè·µçš„ãªè‹±èªè¡¨ç¾ã‚’å­¦ã³ã¾ã™ã€‚',
        category: 'ãƒ“ã‚¸ãƒã‚¹',
        price: 34800,
        duration: 600,
        level: 'ä¸­ç´š',
        thumbnail: '/logo-school.jpg',
        isPublished: true,
        totalStudents: 28,
        averageRating: 4.7,
        totalReviews: 10
      },
      {
        id: 'course_ui_ux_design',
        title: 'UI/UXãƒ‡ã‚¶ã‚¤ãƒ³å®Ÿè·µè¬›åº§',
        description: 'ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½“é¨“ã‚’é‡è¦–ã—ãŸWebãƒ‡ã‚¶ã‚¤ãƒ³ã®æ‰‹æ³•ã‚’å­¦ã³ã¾ã™ã€‚Figmaã‚’ä½¿ã£ãŸå®Ÿè·µçš„ãªãƒ‡ã‚¶ã‚¤ãƒ³ã‚¹ã‚­ãƒ«ã‚’ç¿’å¾—ã—ã¾ã™ã€‚',
        category: 'ãƒ‡ã‚¶ã‚¤ãƒ³',
        price: 44800,
        duration: 540,
        level: 'ä¸­ç´š',
        thumbnail: '/logo-school.jpg',
        isPublished: true,
        totalStudents: 21,
        averageRating: 4.9,
        totalReviews: 6
      },
      {
        id: 'course_marketing_basic',
        title: 'ãƒ‡ã‚¸ã‚¿ãƒ«ãƒãƒ¼ã‚±ãƒ†ã‚£ãƒ³ã‚°åŸºç¤',
        description: 'SNSãƒãƒ¼ã‚±ãƒ†ã‚£ãƒ³ã‚°ã€SEOã€ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ãƒãƒ¼ã‚±ãƒ†ã‚£ãƒ³ã‚°ãªã©ã€ãƒ‡ã‚¸ã‚¿ãƒ«æ™‚ä»£ã®ãƒãƒ¼ã‚±ãƒ†ã‚£ãƒ³ã‚°æ‰‹æ³•ã‚’ç·åˆçš„ã«å­¦ã³ã¾ã™ã€‚',
        category: 'ãƒ“ã‚¸ãƒã‚¹',
        price: 32800,
        duration: 480,
        level: 'åˆç´š',
        thumbnail: '/logo-school.jpg',
        isPublished: true,
        totalStudents: 38,
        averageRating: 4.6,
        totalReviews: 9
      }
    ];

    // ã‚µãƒ³ãƒ—ãƒ«å­¦ç”Ÿãƒ‡ãƒ¼ã‚¿
    const sampleStudents = [
      {
        id: 'student_tanaka',
        email: 'tanaka@example.com',
        displayName: 'ç”°ä¸­ å¤ªéƒ',
        role: 'student',
        isInstructor: false,
        photoURL: '/logo-school.jpg',
        bio: 'ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã‚’å‹‰å¼·ä¸­ã®å¤§å­¦ç”Ÿã§ã™'
      },
      {
        id: 'student_sato',
        email: 'sato@example.com',
        displayName: 'ä½è—¤ èŠ±å­',
        role: 'student',
        isInstructor: false,
        photoURL: '/logo-school.jpg',
        bio: 'ã‚­ãƒ£ãƒªã‚¢ãƒã‚§ãƒ³ã‚¸ã‚’ç›®æŒ‡ã—ã¦ã„ã¾ã™'
      },
      {
        id: 'student_suzuki',
        email: 'suzuki@example.com',
        displayName: 'éˆ´æœ¨ ä¸€éƒ',
        role: 'student',
        isInstructor: false,
        photoURL: '/logo-school.jpg',
        bio: 'ãƒ“ã‚¸ãƒã‚¹ã‚¹ã‚­ãƒ«ã‚’å‘ä¸Šã•ã›ãŸã„ã§ã™'
      }
    ];

    createBtn.addEventListener('click', async () => {
      if (!auth.currentUser) {
        showStatus('ãƒ­ã‚°ã‚¤ãƒ³ãŒå¿…è¦ã§ã™', 'error');
        return;
      }

      createBtn.disabled = true;
      cleanBtn.disabled = true;
      clearProgress();
      showStatus('ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿ã‚’ä½œæˆä¸­...', 'info');

      try {
        const adminUid = auth.currentUser.uid;
        
        // 1. ã‚³ãƒ¼ã‚¹ä½œæˆ
        addProgress('ã‚³ãƒ¼ã‚¹ã‚’ä½œæˆä¸­...');
        for (const course of sampleCourses) {
          await setDoc(doc(db, 'courses', course.id), {
            ...course,
            instructorId: adminUid,
            instructorName: auth.currentUser.displayName || 'SIN JAPAN ç®¡ç†è€…',
            createdAt: serverTimestamp(),
            updatedAt: serverTimestamp()
          });
        }
        addProgress('5ä»¶ã®ã‚³ãƒ¼ã‚¹ã‚’ä½œæˆã—ã¾ã—ãŸ', true);

        // 2. ãƒ¬ãƒƒã‚¹ãƒ³ä½œæˆ
        addProgress('ãƒ¬ãƒƒã‚¹ãƒ³ã‚’ä½œæˆä¸­...');
        let lessonCount = 0;
        for (const course of sampleCourses) {
          for (let i = 1; i <= 3; i++) {
            await setDoc(doc(db, 'lessons', `${course.id}_lesson_${i}`), {
              courseId: course.id,
              title: `ãƒ¬ãƒƒã‚¹ãƒ³${i}: ${course.title.split('').slice(0, 15).join('')}...`,
              description: `ã“ã®ãƒ¬ãƒƒã‚¹ãƒ³ã§ã¯${course.title}ã®é‡è¦ãªãƒã‚¤ãƒ³ãƒˆã‚’å­¦ã³ã¾ã™ã€‚`,
              order: i,
              duration: 15,
              videoUrl: '',
              isPreview: i === 1,
              createdAt: serverTimestamp()
            });
            lessonCount++;
          }
        }
        addProgress(`${lessonCount}ä»¶ã®ãƒ¬ãƒƒã‚¹ãƒ³ã‚’ä½œæˆã—ã¾ã—ãŸ`, true);

        // 3. å­¦ç”Ÿã‚¢ã‚«ã‚¦ãƒ³ãƒˆä½œæˆ
        addProgress('å­¦ç”Ÿã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ä½œæˆä¸­...');
        for (const student of sampleStudents) {
          await setDoc(doc(db, 'users', student.id), {
            ...student,
            createdAt: serverTimestamp(),
            updatedAt: serverTimestamp(),
            stats: {
              coursesEnrolled: 0,
              coursesCompleted: 0,
              totalStudyTime: 0,
              certificates: 0
            }
          });
        }
        addProgress('3åã®å­¦ç”Ÿã‚’ä½œæˆã—ã¾ã—ãŸ', true);

        // 4. å—è¬›å±¥æ­´ä½œæˆ
        addProgress('å—è¬›å±¥æ­´ã‚’ä½œæˆä¸­...');
        let enrollmentCount = 0;
        for (const student of sampleStudents) {
          const coursesToEnroll = sampleCourses.slice(0, 2);
          for (const course of coursesToEnroll) {
            await setDoc(doc(db, 'enrollments', `${student.id}_${course.id}`), {
              userId: student.id,
              courseId: course.id,
              enrolledAt: serverTimestamp(),
              progress: Math.floor(Math.random() * 60) + 10,
              lastAccessedAt: serverTimestamp(),
              completedLessons: [],
              isCompleted: false
            });
            enrollmentCount++;
          }
        }
        addProgress(`${enrollmentCount}ä»¶ã®å—è¬›å±¥æ­´ã‚’ä½œæˆã—ã¾ã—ãŸ`, true);

        // 5. ãƒ¬ãƒ“ãƒ¥ãƒ¼ä½œæˆ
        addProgress('ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’ä½œæˆä¸­...');
        const reviews = [
          { rating: 5, comment: 'éå¸¸ã«ã‚ã‹ã‚Šã‚„ã™ãã€å®Ÿè·µçš„ãªå†…å®¹ã§ã—ãŸï¼' },
          { rating: 5, comment: 'åˆå¿ƒè€…ã«ã‚‚å„ªã—ã„èª¬æ˜ã§ã€ã—ã£ã‹ã‚Šç†è§£ã§ãã¾ã—ãŸã€‚' },
          { rating: 4, comment: 'å†…å®¹ã¯è‰¯ã„ã§ã™ãŒã€ã‚‚ã†å°‘ã—å®Ÿä¾‹ãŒã‚ã‚‹ã¨å¬‰ã—ã„ã§ã™ã€‚' },
          { rating: 5, comment: 'ä»•äº‹ã«æ´»ã‹ã›ã‚‹çŸ¥è­˜ã‚’å¾—ã‚‰ã‚Œã¾ã—ãŸã€‚ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ï¼' },
          { rating: 4, comment: 'å…¨ä½“çš„ã«æº€è¶³ã—ã¦ã„ã¾ã™ãŒã€å‹•ç”»ã®éŸ³è³ªãŒæ°—ã«ãªã‚Šã¾ã—ãŸã€‚' }
        ];
        
        let reviewCount = 0;
        for (let i = 0; i < sampleCourses.length; i++) {
          const course = sampleCourses[i];
          const numReviews = Math.min(3, reviews.length);
          
          for (let j = 0; j < numReviews; j++) {
            const student = sampleStudents[j % sampleStudents.length];
            const review = reviews[(i + j) % reviews.length];
            
            await setDoc(doc(db, 'reviews', `review_${course.id}_${student.id}`), {
              courseId: course.id,
              userId: student.id,
              userName: student.displayName,
              rating: review.rating,
              comment: review.comment,
              isPublished: true,
              createdAt: serverTimestamp()
            });
            reviewCount++;
          }
        }
        addProgress(`${reviewCount}ä»¶ã®ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’ä½œæˆã—ã¾ã—ãŸ`, true);

        showStatus('âœ… ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿ã®ä½œæˆãŒå®Œäº†ã—ã¾ã—ãŸï¼', 'success');
        
      } catch (error) {
        console.error('ã‚¨ãƒ©ãƒ¼:', error);
        showStatus(`ã‚¨ãƒ©ãƒ¼: ${error.message}`, 'error');
      } finally {
        createBtn.disabled = false;
        cleanBtn.disabled = false;
      }
    });

    cleanBtn.addEventListener('click', async () => {
      if (!confirm('å…¨ã¦ã®ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿ã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿã“ã®æ“ä½œã¯å–ã‚Šæ¶ˆã›ã¾ã›ã‚“ã€‚')) {
        return;
      }

      cleanBtn.disabled = true;
      createBtn.disabled = true;
      clearProgress();
      showStatus('ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿ã‚’å‰Šé™¤ä¸­...', 'info');

      try {
        addProgress('å‰Šé™¤ã‚’é–‹å§‹ã—ã¦ã„ã¾ã™...');

        // ã‚³ãƒ¼ã‚¹å‰Šé™¤
        for (const course of sampleCourses) {
          await deleteDoc(doc(db, 'courses', course.id));
        }
        addProgress('ã‚³ãƒ¼ã‚¹ã‚’å‰Šé™¤ã—ã¾ã—ãŸ', true);

        // ãƒ¬ãƒƒã‚¹ãƒ³å‰Šé™¤
        const lessonsQuery = query(collection(db, 'lessons'));
        const lessonsSnap = await getDocs(lessonsQuery);
        for (const lessonDoc of lessonsSnap.docs) {
          if (lessonDoc.id.includes('course_')) {
            await deleteDoc(lessonDoc.ref);
          }
        }
        addProgress('ãƒ¬ãƒƒã‚¹ãƒ³ã‚’å‰Šé™¤ã—ã¾ã—ãŸ', true);

        // å­¦ç”Ÿå‰Šé™¤
        for (const student of sampleStudents) {
          await deleteDoc(doc(db, 'users', student.id));
        }
        addProgress('å­¦ç”Ÿã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’å‰Šé™¤ã—ã¾ã—ãŸ', true);

        // å—è¬›å±¥æ­´å‰Šé™¤
        const enrollmentsQuery = query(collection(db, 'enrollments'));
        const enrollmentsSnap = await getDocs(enrollmentsQuery);
        for (const enrollDoc of enrollmentsSnap.docs) {
          if (enrollDoc.id.includes('student_')) {
            await deleteDoc(enrollDoc.ref);
          }
        }
        addProgress('å—è¬›å±¥æ­´ã‚’å‰Šé™¤ã—ã¾ã—ãŸ', true);

        // ãƒ¬ãƒ“ãƒ¥ãƒ¼å‰Šé™¤
        const reviewsQuery = query(collection(db, 'reviews'));
        const reviewsSnap = await getDocs(reviewsQuery);
        for (const reviewDoc of reviewsSnap.docs) {
          if (reviewDoc.id.includes('review_course_')) {
            await deleteDoc(reviewDoc.ref);
          }
        }
        addProgress('ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’å‰Šé™¤ã—ã¾ã—ãŸ', true);

        showStatus('âœ… ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿ã®å‰Šé™¤ãŒå®Œäº†ã—ã¾ã—ãŸ', 'success');
        
      } catch (error) {
        console.error('ã‚¨ãƒ©ãƒ¼:', error);
        showStatus(`ã‚¨ãƒ©ãƒ¼: ${error.message}`, 'error');
      } finally {
        createBtn.disabled = false;
        cleanBtn.disabled = false;
      }
    });
  </script>
</body>
</html>
